{
  "info": {
    "_postman_id": "5e4b13d9-f613-4ca6-a971-59065a6335d5",
    "name": "LibSys",
    "description": "Collection para o Sistema de Gerenciamento de Biblioteca Digital (LibSys).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "General",
      "item": [
        {
          "name": "Health Check",
          "id": "9d628ace-d895-4229-a30f-8dc73cfca960",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Root",
          "id": "e122da80-9346-4f3a-89f8-ff477f25f3be",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                ""
              ]
            }
          },
          "response": []
        }
      ],
      "id": "a91c246a-b5ef-447a-8c82-75e18fc2a0d7"
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login (Generate JWT Token)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8a2a7141-94e1-493e-8362-20a25133750e",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    var accessToken = jsonData.access_token;",
                  "    var tokenType = jsonData.token_type;",
                  "    pm.environment.set(\"access_token\", accessToken);",
                  "    pm.environment.set(\"token_type\", tokenType);",
                  "    pm.collectionVariables.set(\"access_token\", accessToken);",
                  "    pm.collectionVariables.set(\"token_type\", tokenType);",
                  "    pm.globals.set(\"access_token\", accessToken);",
                  "    pm.globals.set(\"token_type\", tokenType);",
                  "    console.log(\"Token salvo com sucesso!\");",
                  "} else {",
                  "    console.warn(\"Login falhou\", pm.response.code, pm.response.text());",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a12bc6b3-7ca8-4c42-b2c0-b240e8a926e3",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "cc070aa7-a157-4f0d-9351-8d172a1c7924",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "username",
                  "value": "admin@libsys.com",
                  "type": "text",
                  "description": "Email do usuário"
                },
                {
                  "key": "password",
                  "value": "admin123",
                  "type": "text",
                  "description": "Senha do usuário"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/token",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "token"
              ]
            },
            "description": "Realiza login e gera um token JWT válido por 30 minutos"
          },
          "response": []
        }
      ],
      "id": "c85be634-6168-4e9c-8873-c80899b7cc90"
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create User (With Password)",
          "id": "e3545af4-f637-471c-8278-963f23272a1a",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Machado de Assis\",\n    \"email\": \"machado@literatura.com.br\",\n    \"password\": \"senha123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                ""
              ]
            },
            "description": "Cria um novo usuário com name, email e password (mín. 6 caracteres)"
          },
          "response": []
        },
        {
          "name": "List Users",
          "id": "a0c82887-a895-4191-88df-36599196e126",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/?skip=0&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                ""
              ],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Me",
          "id": "d9ab2a7b-6a0d-4d3e-9a3b-2f7b3a6d4d88",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Users",
          "id": "1c5a7d0b-9dbd-4c35-9f1c-9ef2b2a4a7e1",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/lookup?q=Ana&skip=0&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "lookup"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "Ana",
                  "uuid": "9a62127d-2a35-4cad-99fb-e29847d31fc0"
                },
                {
                  "key": "skip",
                  "value": "0",
                  "uuid": "400ea7da-7c48-482e-afa0-0ea6adffbac4"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "uuid": "f8823c2c-7172-4781-b5ec-bbd63401806c"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Users by IDs",
          "id": "7bdb9b1e-2c7a-4b52-8ed1-4a2d9c67d1c3",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/lookup/ids?ids=1&ids=2",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "lookup",
                "ids"
              ],
              "query": [
                {
                  "key": "ids",
                  "value": "1"
                },
                {
                  "key": "ids",
                  "value": "2"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "id": "94fb3416-747f-4dba-a116-f6c2a53e55e6",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "1"
              ]
            },
            "description": "Obtém um usuário pelo ID (requer token JWT válido)"
          },
          "response": []
        },
        {
          "name": "Update User Status",
          "id": "8a1b3d5f-0b7b-4c6d-9a84-4a8a8e7ed98b",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/1/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "1",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Reset My Password",
          "id": "a7f44c90-40f5-4af5-98ed-7b40d07b7b65",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"new_password\": \"novaSenha123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/me/reset-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "me",
                "reset-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Reset User Password (Admin)",
          "id": "b7f8f0ab-2b6e-44a6-9f5a-9b6d4bd0b2a3",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/1/reset-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "1",
                "reset-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Users PDF",
          "id": "7aa97156-7cd4-4e32-9e2f-542f7e7167b2",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/export/pdf",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "export",
                "pdf"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List User Loans",
          "id": "2e46b877-1a4d-4f62-9b2c-6b1f3d6f0b78",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/1/loans?status=active&skip=0&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "users",
                "1",
                "loans"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Lista empréstimos de um usuário específico com filtros opcionais"
          },
          "response": []
        }
      ],
      "id": "6f7523d4-26c4-4725-b1c7-489792c4fbbe"
    },
    {
      "name": "Books",
      "item": [
        {
          "name": "Create Book",
          "id": "85b3e1ef-c749-4ed5-92d2-9c902d682799",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Dom Casmurro\",\n  \"author\": \"Machado de Assis\",\n  \"isbn\": \"978-857232\",\n  \"total_copies\": 3\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/books/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "books",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Book by ID",
          "id": "0a0d8f3b-7c41-4d93-93e2-4f3ad8d1f0b3",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/books/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "books",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Books (Search)",
          "id": "8bf4c4fc-f16e-4664-9d63-49abe3d485b1",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/books/?title=Dom&limit=5",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "books",
                ""
              ],
              "query": [
                {
                  "key": "title",
                  "value": "Dom",
                  "description": "Filtro parcial por título"
                },
                {
                  "key": "author",
                  "value": null,
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Books PDF",
          "id": "7a5c2b6a-28da-4de1-b6e0-6f4d4f8b3d1a",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/books/export/pdf?title=Dom&author=Machado",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "books",
                "export",
                "pdf"
              ],
              "query": [
                {
                  "key": "title",
                  "value": "Dom"
                },
                {
                  "key": "author",
                  "value": "Machado"
                }
              ]
            }
          },
          "response": []
        }
      ],
      "id": "85876297-525c-41c6-a6aa-5e6f9b635484"
    },
    {
      "name": "Loans",
      "item": [
        {
          "name": "Create Loan",
          "id": "1f81bdad-ae64-43a6-b769-0f37f6bd5b00",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": 1,\n  \"book_id\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/loans/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Return Loan",
          "id": "e7d57f9b-cc81-4255-8fbf-a13d7612bfae",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/loans/1/return",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                "1",
                "return"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Extend Loan",
          "id": "4b1a3d2f-7f6c-4aa9-9c6d-9e9d4d6b3e21",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/loans/1/extend",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                "1",
                "extend"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Loans (Active)",
          "id": "3ef4f61a-05f6-4192-ab0f-0e485b81d739",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/loans/?status=active&skip=0&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                ""
              ],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "user_id",
                  "value": "1",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Loans CSV",
          "id": "a27bdfbd-9d69-43d1-8f2c-1a35b2bb8d6a",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/loans/export/csv?status=ACTIVE",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                "export",
                "csv"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "ACTIVE"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Loans PDF",
          "id": "2d3a6a7f-8b0d-4f6c-9c4d-3c1e8f2a9b11",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/loans/export/pdf?status=ACTIVE",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "loans",
                "export",
                "pdf"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "ACTIVE"
                }
              ]
            }
          },
          "response": []
        }
      ],
      "id": "4aba3cba-a397-46a9-9025-aa7bdc9eb231"
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Dashboard Summary",
          "id": "6f6a2b7b-2a78-4d8a-b7ab-7f1a0c3b2a4d",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/analytics/dashboard",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "analytics",
                "dashboard"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "e3b1a8b7-6d54-4c5a-8a79-3c9d7b4f1a23"
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Dispatch Notifications",
          "id": "9c2d7f5a-3f59-4d1b-8f3b-1e2a6c9b7f11",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"channels\": [\"email\"],\n  \"limit\": 50\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/notifications/dispatch",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications",
                "dispatch"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "c1a8b2d7-4e4e-4d2a-9f1c-8b9d2f3a4c5e"
    }
  ],
  "variable": [
    {
      "id": "db969ae3-b3e3-4641-a8f6-0cf7a887117f",
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "id": "568bc62a-6401-4397-84fc-1b30ca2a1e3f",
      "key": "access_token",
      "value": ""
    },
    {
      "id": "243cbe73-ac77-4e96-a001-28f3df3525b4",
      "key": "token_type",
      "value": ""
    }
  ]
}